package fr.travauxetservices.data;

import fr.travauxetservices.AppUI;
import fr.travauxetservices.model.*;
import fr.travauxetservices.tools.IOToolkit;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

import javax.persistence.EntityManager;
import javax.persistence.Persistence;
import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import java.util.*;

/**
 * Created by Phobos on 13/12/14.
 */
public class DummyDataGenerator {
    public synchronized static void create() {
        EntityManager em = Persistence.createEntityManagerFactory(AppUI.PERSISTENCE_UNIT).createEntityManager();
        em.getTransaction().begin();

        Message m1 = new Message("view.information", "undefined");
        em.persist(m1);

        Message m2 = new Message("view.rules", "<div><b>Préambule</b></div><div>Les présentes conditions générales d’utilisation décrivent les droits et obligations utilisateurs du site SoCompetent. Les utilisateurs déposent sur le site des annonces d’emploi. Ces compétences et offres d’emploi sont consultables par les utilisateurs du site SoCompetent. Les compétences représentent la capacité de l'individu à réaliser une mission ou un acte. Il dispose de connaissances dans une matière et propose d’en faire profiter un membre du site. Les offres d’emploi consistent, quant à elles, en l’expression d’un besoin exprimé par une personne qui souhaite bénéficier de la réalisation d’un travail précis.</div><div><br></div><div><b>ARTICLE 1 : Conditions d'acceptation</b></div><div>Afin que vous puissiez bénéficier de l'accès au site et créer vos annonces, il vous sera demandé d'accepter les présentes Conditions Générales d'Utilisation. Vous ne pouvez pas utiliser SoCompetent si vous n'avez pas accepté les présentes Conditions Générales d'Utilisation ou bien si votre compte a été provisoirement ou définitivement supprimé. Enfin, un tiers ne peut utiliser votre compte. SoCompetent ne contrôle pas les profils de ses utilisateurs et ne peut certifier les qualités du candidat qui publie son annonce, ni son annonces elle-même.</div><div><br></div><div><b>ARTICLE 2 : Description de la prestation SoCompetent</b></div><div>SoCompetent est un support en ligne accessible par Internet et intervient de manière limitative en mettant en relation les utilisateurs du site. SoCompetent met en ligne une liste d’annonces d’emploi diverses et variées et permet ainsi de mettre en relation les utilisateurs du site.</div><div><ul><li>Nous ne fixons pas les tarifs des contractants,</li><li>Nous ne rédigeons pas de contrat de travail entre les parties,</li><li>Nous n'influençons pas le choix d'un profil ou d’une compétence,</li><li>Nous n'exerçons aucun contrôle sur le contenu des missions, compétences et profils,</li><li>Nous n'avons aucune obligation de moyens, ni de résultats.</li></ul></div><div>ARTICLE 3 : Protection de la vie privée et anonymat</div><div>Les annonces disponibles sous leur propre responsabilité par les utilisateurs, ne devront faire apparaître aucune mention concernant l'âge, le sexe, l'origine de l'utilisateur, un signe d'appartenance religieuse ou un handicap.</div><div>Certaines de vos données personnelles sont limitativement communiquées à des tiers et utilisées par eux ou nous-mêmes. En acceptant les Conditions Générales d'Utilisation de nos services, vous certifiez accepter l'utilisation et la communication à des tiers des données personnelles suivantes :</div><div><ul><li>Nom de membre,</li><li>Adresse de messagerie/ e-mail.</li></ul></div><div><b>ARTICLE 4 : Comptes utilisateurs</b></div><div>Vous vous engagez à donner à SoCompetent un accès illimité dans le temps à toutes vos informations personnelles disponibles sur votre compte utilisateur. Les utilisateurs du service SoCompetent établissent et créent sous leur propre responsabilité une ou des annonces qui leur sont propres ainsi que les informations relatives à leur profil.</div><div><br></div><div><b>ARTICLE 5 : Comportement des utilisateurs SoCompetent</b></div><div>Vous vous engagez à respecter les bonnes moeurs, à avoir un comportement responsable et citoyen sur le site SoCompetent. Il n’est pas accepté que le support en ligne SoCompetent soit utilisé à d'autres fins que la recherche et la mise en relation de compétences et d’offres d’emploi.</div><div><br></div><div><b>ARTICLE 6 : Conformité à la loi</b></div><div>Les utilisateurs du service SoCompetent sont par l'acceptation des présentes Conditions Générales d'Utilisation, contraints de se conformer aux lois, règlements, normes de toutes sortes en vigueur, et également aux présentes Conditions Générales d'Utilisation relatives à l'utilisation de nos services. Tout contenu présent ou déposé sur le site SoCompetent est considéré comme appartenant à SoCompetent.</div><div>ARTICLE 7 : Indemnités</div><div>Tous les utilisateurs du site SoCompetent ne pourront à quelque titre que ce soit, engager d'action judiciaire à l'encontre des exploitants de ce site, ces derniers n'étant pas responsables des difficultés d'ordre contractuel ou autre qui pourraient se poser entre utilisateurs mis en relation par l’intermédiaire du site. Le membre qui engagerait tout de même une action judiciaire à l'encontre de SoCompetent, s'engage à indemniser les exploitants de ce site dans le cas d’une telle initiative jugée abusive ou infondée par les Tribunaux et Cours saisis dans le cas par exemple, d’une violation des présentes Conditions Générales d'Utilisation, des lois ou des règlements en vigueur.</div><div><b>ARTICLE 8 : Informations personnelles</b></div><div>Les informations que vous déposez sur le support en ligne SoCompetent :</div><div><ul><li>Ne doivent pas être fausses, mensongères, erronées, imprécises,</li><li>Ne doivent pas induire en erreur ou tromper de quelques façons possibles un utilisateur,</li><li>Ne doivent pas porter préjudice moral ou physique à toutes personnes ayant accès à ces informations,</li><li>Ne doivent pas porter préjudice aux droits d'auteur, aux titulaires de brevets ou de marques, aux règles sur la propriété intellectuelle, aux secrets de fabrication, au droit de divulgation ou à la vie privée des tiers,</li><li>Ne doivent pas enfreindre les lois et règlements,</li><li>Ne doivent pas être diffamatoires, médisantes ou calomnieuses,</li><li>Ne doivent pas être discriminatoires, inciter à la violence, la haine raciale, religieuse ou éthique, et ne doivent pas constituer une apologie de crime de guerre,</li><li>Ne doivent pas posséder des contenus obscènes ou pédophiles,</li><li>Ne doivent pas contenir de virus ou tous autres types de nuisances considérés comme tels, ayant pour but d'endommager tout système informatique,</li><li>Ne doivent pas comprendre de liens hypertextes vers des services autres que ceux proposés par SoCompetent,</li></ul></div><div>Les annonces d’emploi suivantes ne sont pas autorisées sur SoCompetent.:</div><div><ul><li>Les annonces proposant des pyramides financières, chaînes d’argent, offres de marketing multi-niveaux,</li><li>Les offres d'emplois nécessitant un versement préalable ou périodique</li></ul></div><div>L’utilisateur qui s'aperçoit au cours de sa navigation sur le site SoCompetent ou lors d'échanges de messages/informations que certains des propos tenus sont diffamatoires ou sont des informations interdites sur le site (cf liste précédente) est tenu d'informer les administrateurs du site au plus vite grâce à la rubrique \"Contact\".</div><div><br></div><div><b>ARTICLE 9 : Résiliation</b></div><div>Vous reconnaissez que SoCompetent peut à tout moment résilier votre compte utilisateur et votre droit d'accès en cas de non utilisation prolongée du service, de violation des conditions d'utilisation, de non respect des lois et règlements, d'actes frauduleux, du non respect des bonnes moeurs ou tout autre motif légitime (injures, haine, etc).</div><div><br></div><div><b>ARTICLE 10 : Garanties</b></div><div>Vous reconnaissez et acceptez que l'utilisation du service SoCompetent se fait à vos entiers risques et périls en « l'état ». Nous ne garantissons pas la véracité des informations indiquées sur les profils des utilisateurs et remplis par ces derniers et nous ne garantissons pas l'intégrité permanente du contenu ainsi que du service. Nous ne nous engageons pas à vous fournir une prestation sans incidents, sans interruptions de service, sans erreurs. Enfin, Socompetent décline toute responsabilité relativement aux informations, textes, articles, missions consultables sur ce site émanant de rédacteurs tiers ou de tiers, quels qu’ils soient.</div><div><br></div><div>ARTICLE 11 : Limites de responsabilités</div><div>SoCompetent n'étant qu'un support en ligne, nous n'intervenons en aucun cas dans les relations contractuelles nouées ou conclues entre les membres ou entre un membre ou un tiers. La responsabilité de SoCompetent ne peut pas être engagée sur le contenu des missions/ compétences, sur les réelles compétences des utilisateurs et sur la véracité des missions proposées et déposées par les membres. La responsabilité de SoCompetent ne pourra pas être engagée après la mise en relation des utilisateurs ainsi que lors de la réalisation des missions.</div><div><br></div><div><b>ARTICLE 12 : Vérification des informations fournies par les utilisateurs</b></div><div>Nous n'exerçons aucun contrôle sur les informations transmises entre les utilisateurs ni sur la véracité, la qualité ou la teneur des annonces déposées, ni sur la capacité des annonces à réaliser les missions. Nous n'intervenons jamais dans la conclusion des affaires et la signature des contrats entre les utilisateurs du service SoCompetent. Enfin, nous ne contrôlons pas les informations ou discours tenus dans les e-mails entre utilisateurs. Dans tout échange d'information par e-mail ou tout autre support fournis par SoCompetent, vous êtes seul responsable de ce que l’utilisateur écrit et des informations personnelles (nom, prénom, adresse, téléphone…) qu’il y dépose.</div><div><br></div><div>SoCompetent ne joue qu'un rôle de support électronique et/ou intermédiaire passif par la mise en ligne de ces informations. Toutes les informations relatives aux utilisateurs sont préalablement déclarées par SoCompetent auprès de la CNIL.</div><div><br></div><div><b>ARTICLE 13 : Description des annonces d’emploi proposées</b></div><div>L’utilisateur doit fournir des informations vraies et de qualité concernant ses compétences. Ces compétences ne doivent pas induire en erreur les utilisateurs et doivent être en concordance avec ses aptitudes réelles.</div><div><br></div><div><b>ARTICLE 14 : Description des offres d’emploi sollicitées</b></div><div>L’utilisateur doit indiquer sur le site une définition de mission correspondant à la réalité et étant de qualité et en adéquation avec ses propres besoins. Ces missions doivent être claires, précises et explicites pour que les utilisateurs puissent les comprendre et y répondre.</div><div>Vous êtes seul responsable du contenu, du descriptif et de la catégorie des missions que vous déposez sur SoCompetent.</div><div><br></div><div><b>ARTICLE 15 : Déclaration à la CNIL</b></div><div>Les informations recueillies font l'objet d'un traitement informatique et automatisé. Conformément à la loi « informatique et libertés » du 6 janvier 1978, vous bénéficiez d'un droit d'accès et de rectification aux informations qui vous concernent. Si vous souhaitez exercer ce droit et obtenir communication des informations vous concernant, veuillez nous contacter.</div><div><br></div><div><b>ARTICLE 16 : Demandes judiciaires</b></div><div>Les annonces établies par les utilisateurs lors de leur inscription restent intégralement confidentielles, à l'exception des informations données sur le site permettant de décrire les annonces. L'adresse personnelle des utilisateurs reste également strictement confidentielle et ne sera pas divulguée sur le site. Nous répondons aux requêtes des autorités judiciaires et des tiers pour respecter la loi, les droits de propriété intellectuelle ou tout autre droit. Nous pouvons et vous nous autorisez à communiquer toute information vous concernant aux représentants de la loi ou de l'administration. Cette communication s'effectuera si les autorités le jugent nécessaire et ce, en raison d'une enquête sur toute activité illégale qui pourrait voir notre responsabilité engagée.</div><div><br></div><div>Il est formellement interdit d'envoyer des messages commerciaux non sollicités aux autres utilisateurs. Vous ne pouvez pas communiquer les données personnelles d'autres utilisateurs à des tiers sans notre consentement préalable et celui des utilisateurs concernés.</div><div><br></div><div><b>ARTICLE 17 : Insérer une image et/ou une vidéo</b></div><div>Vous pouvez insérer un diaporama (photographies, dessins,...) ou une vidéo pour promouvoir votre annonce sur la plateforme SoCompetent, dans le but d'illustrer votre activité et/ou de vous présenter. Vous autorisez donc SoCompetent à diffuser ces images ou cette vidéo afin qu'elles apparaissent sur les différents supports de promotion de votre annonce sur la plateforme SoCompetent.</div><div><br></div><div>Vous autorisez également SoCompetent à diffuser ces images dans le cadre d'opération de promotion portant sur la plateforme SoCompetent. En l'absence de contrôle de la part de SoCompetent du contenu de ces images ou de cette vidéo, vous reconnaissez que sa mise en ligne relève de votre seule responsabilité.</div><div><br></div><div>Vous vous interdisez en particulier :</div><div><ul><li>de bafouer la dignité humaine par une image, vidéo et/ou des propos à caractère raciste, violent, pornographique ou révisionniste ;</li><li>de porter atteinte à la vie privée d'autrui ;</li><li>d'utiliser une image ou une vidéo sur laquelle vous ne détenez pas les droits ou nécessitant l'autorisation préalable d'un tiers ;</li><li>enfin de manière générale, d'utiliser des images et/ou une vidéo portant atteinte aux droits d'auteurs de tiers et à la propriété intellectuelle.</li></ul></div><div>Si vous décidez d'insérer un diaporama ou une vidéo de vous-même, vous autorisez SoCompetent à l'utiliser et à la diffuser. La présente autorisation est personnelle et incessible, elle ne s'applique qu'aux supports mentionnés. Elle pourra être révoquée à tout moment par le biais de la modification de votre compte SoCompetent, dans l'espace de gestion des annonces.</div><div><br></div><div><b>ARTICLE 18 : Respect de l'âge minimum légal du travail</b></div><div>Celui qui dépose sa compétence/ mission sur le site SoCompetent, confirme qu'il respecte les dispositions sur l'âge minimum légal du travail.</div><div><br></div><div><b>ARTICLE 19 : Notifications</b></div><div>Vous pouvez nous adresser vos remarques grâce à la rubrique \"Contact\".</div>");
        em.persist(m2);

        Message m3 = new Message("view.terms", "<div><b>Acceptation des Conditions Générales d’Utilisation :</b></div><div>La lecture et l’acceptation sans réserve des présentes Conditions Générales d’Utilisation (CGU) sont impératives et subordonnent l’usage des services et contenus proposés par YakasAider.fr</div><div>Le clic de validation a valeur de signature électronique et prouve que l’utilisateur a bien pris connaissance de l’intégralité de ces conditions et des responsabilités, obligations et engagements qui lui incombent.</div><div>Tout utilisateur ne respectant pas les présentes CGU se verra exclu temporairement ou définitivement.</div><div>YakasAider.fr se réserve le droit de modifier à tout moment les présentes conditions sans préavis ni indemnités quelconques. Les utilisateurs se tiendront informés par la visite régulière de ces CGU. En cas de non acceptation des nouvelles conditions, l’utilisateur pourra résilier son inscription sur simple demande dans un délai de 10 jours ; au-delà de cette période, nous considérons les modifications apportées comme lues et acceptées.</div><div><br></div><div><br></div><div><b>Accès au site par un réseau internet et conditions de connexion :</b></div><div>YakasAider.fr est accessible 24h/24 et 7j/7. Sauf en période de maintenance ou pannes. Nous nous efforcerons de limiter les interruptions qui relèveraient de notre responsabilité.</div><div>L’utilisateur est responsable de son installation personnelle et de son accès internet (FAI).</div><div>YakasAider.fr et son exploitant ne pourront être tenus pour responsable des difficultés d’accès au réseau internet confié aux différents fournisseurs.</div><div>YakasAider.fr utilise des cookies, destinés à stocker des informations identifiant l’utilisateur durant l’utilisation du site afin de lui éviter d’avoir à saisir manuellement à chaque page consultée. L’utilisateur dispose toutefois de la possibilité d’empêcher l’utilisation des cookies en modifiant les options de son logiciel de navigation internet.</div><div>Les utilisateurs ont interdiction d’intervenir dans le site ou les activités de YakasAider.fr à l’aide de logiciels, ou d’avoir une activité sur le site susceptible de perturber ou de tenter de perturber les activités de YakasAider.fr</div><div><br></div><div><br></div><div><b>Propriété intellectuelle :</b></div><div>Le site YakasAider.fr est propriété exclusive de l'exploitant (voir mentions légales) et à tous les droits de propriété intellectuelle concernés.</div><div>La dénomination, nom de domaine, logotype du site YakasAider.fr sont une marque déposée. Toute reproduction non autorisée de ces marques, logos et signes distinctifs constitue une contrefaçon passible de sanctions pénales. Le contrevenant s'expose à des sanctions civiles et pénales et notamment aux peines prévues aux articles L. 335.2 et L. 343.1 du code de la Propriété Intellectuelle.</div><div>Le site ainsi que son contenu sont protégés par la loi française et internationale sur les droits d’auteurs et droit voisins du droit d’auteur : Article L122-4 du code de la Propriété intellectuelle, interdisant les reproductions intégrales ou partielles sans consentement de l’auteur ou de ses ayants droits ou ayants causes. Article L122-5 du CPI autorisant les représentations, les copies ou reproductions à usage privé, sous réserves d’indication de la source et du nom de l’auteur. Article L341-1 et suivants sur les droits du producteur de base de données.</div><div>En conséquence, l’utilisateur s’engage à respecter les droits d’auteur, droits de marque et droits du producteur de base de données. Tout agissement contraire à ces droits sera considéré comme préjudice engageant la responsabilité civile et/ou pénale de son auteur.</div><div>L’utilisateur reconnait que les bases de données accessibles sur le site sont la propriété de YakasAider.fr. L’utilisation de ces données par un utilisateur doit rester dans un cadre privé. L’utilisateur n’est pas autorisé à transférer ou vendre des informations obtenues à partir du site, ni à créer des œuvres dérivées des éléments précités.</div><div>L'Utilisateur est seul responsable de ce qu'il met en ligne via le site, ainsi que des textes et/ou opinions qu'il formule. Il s'engage notamment à ce que ces données ne soient pas de nature à porter atteinte aux intérêts légitimes de tiers quels qu'ils soient. A ce titre, il garantit l’exploitant du site contre tous recours, fondés directement ou indirectement sur ces propos et/ou données, susceptibles d'être intentés par quiconque à l'encontre de l’exploitant du site. Il s'engage en particulier à prendre en charge le paiement des sommes, quelles qu'elles soient, résultant du recours d'un tiers à l'encontre de l’exploitant du site, y compris les honoraires d'avocat et frais de justice.&nbsp;</div><div><br></div><div>YakasAider.fr se réserve le droit de supprimer tout ou partie du contenu mis en ligne par un utilisateur, à tout moment et pour quelque raison que ce soit, sans avertissement ou justification préalable. L'Utilisateur ne pourra faire valoir aucune réclamation à ce titre.</div><div><br></div><div><br></div><div><b>Inscription / Protection des données personnelles :</b></div><div>L’inscription est gratuite.</div><div>L’utilisateur doit être âgé au minimum de 18 ans et s’engage à fournir des renseignements exacts lors de son inscription et sur le contenu que celui-ci pourra renseigner sur le site. Ces informations servant au bon fonctionnement du site.</div><div>L’utilisateur s’engage à ne pas créer une fausse identité de nature à induire les tiers en erreur. Au cas où l’une de ces informations s’avèreraient fausse, ou obsolète, YakasAider.fr se réserve le droit, sans aucune indemnité ni préavis, de suspendre temporairement ou définitivement un utilisateur.</div><div>L'ensemble des données nominatives fournies par les utilisateurs est uniquement destiné à YakasAider.fr. Leur utilisation est limitée au bon déroulement des mises en relations et au bon fonctionnement du site. Aucune de ces données n'est vendue, donnée, cédée ou échangée. Conformément à la loi informatique et libertés N°78-17 du 6 janvier 1978, l'utilisateur dispose d'un droit d'accès ou de rectification à l'égard des données nominatives collectées.</div><div>Les traitements informatiques relatifs aux fichiers du système YakasAider.fr ont fait l’objet d’une déclaration auprès de la CNIL sous le n°1546027.</div><div><br></div><div><br></div><div><b>Liens vers des sites extérieurs :</b></div><div>Le site YakasAider.fr &nbsp;contient des liens donnant accès à d’autres sites édités et gérés par des tiers. &nbsp;Yakasaider.fr et son exploitant ne pourront être tenu responsable directement ou indirectement dans le cas où les dits sites tiers ne respecteraient pas les dispositions légales et réglementaires en vigueur, &nbsp;ainsi que des conséquences de ce non-respect.</div><div><br></div><div><br></div><div><b>Compteur temps :</b></div><div>Un compteur temps est attribué à chaque utilisateur.</div><div>Pour chaque heure de service rendu, le compteur temps s’incrémente de 1 (soit +1).</div><div>Pour chaque heure de service reçu, le compteur se décrémente de 1 (soit -1).</div><div>Un compteur temps supérieur à zéro permet de bénéficier de services de la part d’autres membres sans avoir à s’acquitter d’une caution.</div><div><br></div><div>Le système de caution (décrit dans le chapitre suivant) permet également d’incrémenter ce compteur du nombre d’heures cautionnées.&nbsp;</div><div><br></div><div><b>Caution :</b></div><div>Lorsqu’un utilisateur souhaite recevoir un service alors que son compteur temps est égal à zéro, une caution doit être versée à hauteur de 10 euros par heure demandée + frais de transaction non restituables. Les frais sont de 1 euros pour 1 heure demandée, 1,5 euros pour 2 heures demandées, ou 1,5 euros pour 3 heures demandées.&nbsp;</div><div>A tout moment la caution peut être récupérée par l’utilisateur sur simple demande via le formulaire de contact. L’unique condition pour pouvoir récupérer sur demande la ou les cautions versées est d’avoir au préalable rendu autant d’heures de services que celles que vous avez obtenues.</div><div><br></div><div>Le site étant fondé sur des valeurs d’entraide (et non pas simplement une consommation unilatérale de services), les membres s’engagent à ne pas utiliser abusivement le système de caution permettant d’obtenir des services sans jamais avoir à rendre service. Un rappel à l’ordre pourra être fait par YakasAider.fr afin de régulariser la situation sous peine de suspension temporaire ou définitive du membre concerné.&nbsp;</div><div><br></div><div><b>Abonnement / Gratuité :</b></div><div>Aucun frais d’abonnement n’est demandé. Toutefois, en fonction des circonstances futures, YakasAider.fr se réserve le droit de devenir payant. Chaque utilisateur pourra alors choisir sous un délai de 1 mois d’accepter les nouvelles conditions ou de demander une résiliation d’inscription au site.</div><div><br></div><div>L’utilisateur n’acceptant pas les nouvelles conditions devra solder son compteur temps durant ce mois de préavis. Aucun dédommagement ne pourra être demandé et ce quelques soit le niveau de son compteur temps à la fin du préavis. L’utilisateur pourra sur simple demande récupérer la ou les cautions versées sous réserve que celui-ci ait rendu au préalable autant d’heures de services que celles qu’il a reçues.</div><div><br></div><div><b>Suspension temporaire ou définitive (résiliation) :</b></div><div>YakasAider.fr se réserve le droit de suspendre temporairement ou définitivement l’accès au site pour un utilisateur n’ayant pas respecté les présentes CGU ou pour tout comportement jugé inadapté.</div><div><br></div><div>Cette suspension pourra être immédiate et sans préavis ni indemnités quelques soit la valeur de son compteur temps. Toutefois, l’utilisateur pourra récupérer la ou les cautions versées sous réserve que son compteur temps soit supérieur ou égal à zéro.</div><div>Un utilisateur peut sur simple demande demander une suspension définitive au site. L’utilisateur pourra récupérer la ou les cautions versées sous réserve d’avoir au préalable rendu autant d’heures de services que celles qu’il a reçues. Aucune autre indemnité ne pourra être demandée, et ce quelques soit la valeur de son compteur temps. Il appartient à l’utilisateur de solder son compteur temps avant de demander sa suspension.</div><div><br></div><div><b>Utilisation de la messagerie :</b></div><div>YakasAider.fr offre aux utilisateurs un système de messagerie permettant d’échanger des informations à propos des services. S’ils le souhaitent les utilisateurs peuvent échanger leurs coordonnées pour faciliter leur mise en relation. Les précautions et mesures de prudences prises lors de cette mise en relation doivent être définies par les utilisateurs eux-mêmes et n’engage en aucun cas YakasAider.fr et son exploitant.</div><div>En tant qu’auteur, les utilisateurs s’engagent à ne pas rédiger de messages comportant :</div><div>- Toute information ou commentaires sur d’autres utilisateurs.</div><div>- Tout propos à caractère racial, discriminatoire, diffamatoire, haineux, violent, grossier, obscène, ou portant atteinte à l’ordre public ou aux bonnes mœurs ni ayant trait à des activités illicites.</div><div>- Tout propos incitant au non-respect des présentes conditions générales d’utilisation.</div><div>- Tout autre contenu répréhensible par la loi.</div><div>- Tout élément ayant un but néfaste pour le site.</div><div>- Tout élément publicitaire non sollicité à caractère commercial.</div><div>- Tout message du type spamming auprès de différents utilisateurs.</div><div>(Liste non exhaustive)</div><div>Si vous faite l’objet de tels agissements, veuillez nous le signaler via le formulaire de contact, rubrique : alerter le modérateur.</div><div>En cas d’alerte au modérateur, ce dernier peut vérifier les messages envoyés/reçu afin de statuer si un utilisateur doit être exclu temporairement ou définitivement, et ce sans indemnités ni préavis.</div><div>YakasAider.fr et son exploitant ne sont pas responsables des messages laissés par d’autres utilisateurs.</div><div><br></div><div><br></div><div><b>Contenu édité par les utilisateurs :</b></div><div>Les utilisateurs ont la possibilité de décrire précisément les services qu’ils proposent.&nbsp;</div><div>YakasAider.fr et son exploitant déclinent toute responsabilité quant au contenu déposé par les utilisateurs (informations erronées, descriptif non conforme à la réalité en termes de qualifications, compétences, diplômes, d’expériences, d’agréments, etc…).</div><div>En tant qu’auteur, les utilisateurs s’engagent à ne pas rédiger de messages comportant :</div><div>- Toute information ou commentaires sur d’autres utilisateurs.</div><div>- Tout propos à caractère racial, discriminatoire, diffamatoire, haineux, violent, grossier, obscène, ou portant atteinte à l’ordre public ou aux bonnes mœurs ni ayant trait à des activités illicites.</div><div>- Tout propos incitant au non-respect des présentes conditions générales d’utilisation.</div><div>- Tout autre contenu répréhensible par la loi.</div><div>- Tout élément ayant un but néfaste pour le site.</div><div>- Tout élément publicitaire pour un site concurrent.</div><div>- Toute publicité du type spamming auprès de différents utilisateurs.</div><div>(Liste non exhaustive).</div><div>Si vous constatez l’objet de tels agissements, veuillez nous le signaler via le formulaire de contact, rubrique : alerter le modérateur.</div><div>En cas d’alerte au modérateur, ce dernier peut vérifier les messages envoyés/reçu afin de statuer si un utilisateur doit être exclu temporairement ou définitivement, et ce sans indemnités ni préavis.</div><div>YakasAider.fr se réserve le droit de supprimer une partie du contenu édité par un utilisateur si ce contenu est jugé inadapté.</div><div><br></div><div><br></div><div><b>Contenu édité par l’exploitant du site:</b></div><div>Les informations fournies par l’exploitant du site le sont à titre indicatif. L’exploitant du site ne saurait garantir l’exactitude, la complétude, l’actualité des informations diffusées sur son site. En conséquence, l’utilisateur reconnaît utiliser ces informations sous sa responsabilité exclusive.</div><div><br></div><div><br></div><div><b>Relations entre utilisateurs &nbsp;/ Responsabilité:</b></div><div>YakasAider.fr et son exploitant ne sont engagés directement ou indirectement en ce qui concerne la qualité et le bon déroulement des échanges, ni concernant les relations actuelles ou futures entre les utilisateurs. Le respect et l’honnêteté exigés dans ce type de rencontre entre particuliers relèvent de l’entière responsabilité de chaque demandeur et de chaque intervenant. Ils respecteront les mesures d’hygiène et de sécurité et seront assurés. Chaque utilisateur doit s’assurer avant un échange que les assurances des deux membres impliqués dans l’échange couvrent les risques qui y sont liés (assurance individuelle, responsabilité civile). YakasAider.fr et son exploitant ne pourront être tenus pour responsable en cas d’incident ou d’accident qui surviendrait durant un échange.</div><div>La mauvaise qualité d’un service n’est en aucun cas la responsabilité de YakasAider.fr et son exploitant. YakasAider.fr est un simple service de mise en relation entre particuliers sans garantie de résultat. D’autre part, le site propose un service de notation afin d’aider les utilisateurs à faire leur choix, et se limite à reporter ces notations. YakasAider.fr et son exploitant ne pourront être responsables d’une erreur de notation.</div><div>YakasAider.fr et son exploitant ne seront en aucun cas responsables des dommages directs ou indirects subis par un utilisateur lorsque le comportement de celui-ci a concouru à la réalisation du dommage qu’il prétend subir. Notamment dans le cadre du non-respect des présentes CGU.</div><div>Dans le cas où la responsabilité YakasAider.fr ou de son exploitant soit recherchée à raison d’un manquement par un utilisateur aux obligations qui lui incombent aux termes de la loi ou de ces CGU, ce dernier s’engage à garantir l’exploitant de YakasAider.fr contre toute condamnation prononcée à son encontre, cette garantie couvrant tant les indemnités qui seraient éventuellement versées, que les honoraires d’avocat et frais de justice.</div><div><br></div><div><br></div><div><b>Sécurité :</b></div><div>Les utilisateurs bénéficiant ou rendant un service s’engagent à mettre en œuvre des consignes de sécurité appropriées en fonction de la connaissance que ceux-ci ont de leur interlocuteur. En particulier, de se prévaloir d’un maximum de prudence lors d’un déplacement chez un autre utilisateur ou lors de la réalisation d’un service au domicile d’un autre utilisateur.&nbsp;</div><div><br></div><div><br></div><div><b>Activité des membres / Aspect légal :</b></div><div>L’activité des utilisateurs (fréquence et type des échanges de services) doivent respecter certaines conditions :</div><div>- Elle doit être non répétitive. Les utilisateurs s’engagent à éviter de dépasser une limite mensuelle fixée à 12 heures de services reçus et/ou 12 heures de services rendus.</div><div>- Les utilisateurs s’engagent à éviter de proposer des services directement liés à leur profession.</div><div>- Si l’activité est répétitive ou entrant dans le cadre de son métier, il appartient au membre de le déclarer auprès des organismes concernés.</div><div>Lors d’un échange de services, il n’y a pas de lien de subordination. L’utilisateur s’engage à se mettre au service d’un autre utilisateur et réalise sous son contrôle une activité type « coup de main ». L’échange et les liens doivent être du type amical.</div><div><br></div><div><br></div><div><b>Litiges entre utilisateurs :</b></div><div>Si aucun règlement du contentieux à l’amiable n’est possible :</div><div>- Prévenez nous via le formulaire de contact (alerter le modérateur) afin que nous puissions enquêter et suspendre temporairement ou définitivement le compte de l’utilisateur concerné.</div><div>- Portez plainte auprès des autorités compétentes.</div><div><br></div><div><b>Droit applicable et juridiction :</b></div><div>Ces conditions générales d’utilisation sont régies et appliquées conformément au droit français. En cas de demande ou contestation, la langue officielle est la langue française. Pour tout conflit et litiges éventuels, les tribunaux de l’Essonne seront seuls compétents.</div>");
        em.persist(m3);

        Message m4 = new Message("view.about", "<div><b>Le concept Travaux et Services</b></div><div>Nous avons créé Travaux et Services parce que nous croyons que chacun de nous dispose de compétences trop souvent inexploitées.&nbsp;</div><div>Nos talents peuvent être mis à bon usage dans tous les domaines d'activités et ce, quel que soit notre niveau d'expérience ou notre âge, que nous soyons un homme ou une femme, retraité, salarié, profession libérale, chômeur ou étudiant !</div><div><br></div><div><b>Le fonctionnement de Travaux et Services</b></div><div>Chaque membre de la communauté peut soit proposer ses compétences soit offrir un emploi</div><div>Ces offres d’emploi et compétences sont organisées par catégories et précisent le niveau (débutant, intermédiaire, expert), la localisation et les disponibilités. Chacun peut alors consulter offres et profils de candidats puis se mettre en relation. Si les parties souhaitent travailler ensemble, ils définissent alors un accord précisant la nature de la prestation, la durée de la mission et son tarif</div><div><br></div><div>SoCompetent met également à disposition de tout utilisateur des conseils, informations et modèles en relation avec le monde du travail</div><div><br></div><div>Nous vous souhaitons une très bonne navigation sur Travaux et Services</div>");
        em.persist(m4);

        List<Category> categories = getCategories();
        for (Category category : categories) {
            em.persist(category);
        }

        List<Division> divisions = getDivisions();
        for (Division division : divisions) {
            em.persist(division);
        }

        byte[] image = null;
        final ClassLoader ld = em.getClass().getClassLoader();
        InputStream is = ld.getResourceAsStream("/images/dell.png");
        if (is != null) {
            try {
                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                int bytesRead;
                byte[] buffer = new byte[0x200];
                while ((bytesRead = is.read(buffer)) != -1) {
                    baos.write(buffer, 0, bytesRead);
                }
                image = baos.toByteArray();
                baos.close();

            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        City c1 = new City(3031582, "Bordeaux", "97", "33", 44.84044, -0.5805);
        em.persist(c1);

        List<User> users = new ArrayList<User>(3);
        User u1 = new User(UUID.randomUUID(), new Date(System.currentTimeMillis()), Role.ADMIN, Gender.MR, "Thierry", "Linxe", "tlinxe@email.fr", "motdepasse", "0614441385", image, true, true, new HashSet<Rating>());
        em.persist(u1);
        users.add(u1);
        User u2 = new User(UUID.randomUUID(), new Date(System.currentTimeMillis()), Role.CUSTOMER, null, null, "Saunier Duval AGP Atelier Gaz Professionnel", "pn2@email.fr", "motdepasse", "0612335678", null, true, true, new HashSet<Rating>());
        em.persist(u2);
        users.add(u2);
        Rating s1 = new Rating(UUID.randomUUID(), new Date(System.currentTimeMillis()), u1, "Entretien annuel chaudière", "Date de rdv prise rapidement et surtout Ponctuel! Explications de ce qui est fait et doit éventuellement être fait tout au long de l'entretien de la chaudière. Le prix pour un entretien annuel est bien celui qui est indiqué sur le site (77 euros).", 2, 4, 3, 2, 3, 4);
        em.persist(s1);
        Rating s2 = new Rating(UUID.randomUUID(), new Date(System.currentTimeMillis()), u2, null, "Excellent", 5, 0, 0, 0, 0, 0);
        em.persist(s2);
        User u3 = new User(UUID.randomUUID(), new Date(System.currentTimeMillis()), Role.CUSTOMER, null, null, "Linxe", "tomcat33000@hotmail.fr", "motdepasse", "0542123695", null, false, true, new HashSet<Rating>(Arrays.asList(s1, s2)));
        em.persist(u3);
        users.add(u3);
        User u4 = new User(UUID.randomUUID(), new Date(System.currentTimeMillis()), Role.CUSTOMER, null, null, "Vilbois", "benjaminvilbois@gmail.com", "motdepasse", "0542123695", null, false, true, new HashSet<Rating>());
        em.persist(u4);
        users.add(u4);

        Calendar cal = Calendar.getInstance();
        Request r1 = new Request(UUID.randomUUID(), cal.getTime(), u1, "Jardinage", "Recherche un jardinier pour tondre ma pelouse", categories.get(0), divisions.get(0), c1, 0, Remuneration.EXCHANGE, true, 0);
        em.persist(r1);
        cal.add(Calendar.DATE, -1);
        Request r2 = new Request(UUID.randomUUID(), cal.getTime(), u2, "Peinture", "Recherche un peintre", categories.get(1), divisions.get(0), c1, (double) 30.50, Remuneration.TASK, true, 0);
        em.persist(r2);
        cal.add(Calendar.DATE, -1);
        Request r3 = new Request(UUID.randomUUID(), cal.getTime(), u3, "Garde", "Garde d'enfant pour un petit con agé de 11 ans qui me pourri la vie", categories.get(0), divisions.get(1), null, (double) 10, Remuneration.TIME, false, 0);
        em.persist(r3);

        Random random = new Random();
        String text = "Jarrdinier qualifié,je propose mes services pour l'entretien général des parcs et jardins sur le secteur Nord-Bassin.\n" +
                "Tonte,rotofil,entretien des massifs,taille et rabattage de haie,petit élagage,débroussaillage,...etc.\n" +
                "je me déplace avec matériel et assure l'évacuation en déchetterie.Travail soigné.\n" +
                "Rémunération en CESU acceptée";
        Offer o1 = new Offer(UUID.randomUUID(), new Date(System.currentTimeMillis()), users.get(random.nextInt(users.size())), "Offre " + 0, text, categories.get(random.nextInt(categories.size())), divisions.get(3), c1, 10.50, Remuneration.TIME, true, 5);
        em.persist(o1);
        for (int i = 1; i < 100; i++) {
            cal = Calendar.getInstance();
            cal.add(Calendar.DATE, -random.nextInt(365));
            User user = users.get(random.nextInt(users.size()));
            Offer o2 = new Offer(UUID.randomUUID(), cal.getTime(), user, "Offre " + i, text, categories.get(random.nextInt(categories.size())), divisions.get(random.nextInt(divisions.size())), null, 1000.50, Remuneration.TIME, (!user.equals(u3)), 0);
            em.persist(o2);
        }

        em.getTransaction().commit();
    }

    private static List<Category> getCategories() {
        JSONParser parser = new JSONParser();
        try {
            JSONObject jsonObject = (JSONObject) parser.parse(IOToolkit.getResourceAsText("/model/categories.json"));
            return getCategories(jsonObject, null);
        } catch (ParseException pe) {
            System.out.println(pe);
        }
        return new ArrayList<Category>();
    }

    private static List<Category> getCategories(JSONObject o, Category parent) throws ParseException {
        List<Category> values = new ArrayList<Category>();
        JSONArray jsonArray = (JSONArray) o.get("categories");
        if (jsonArray != null) {
            Iterator i = jsonArray.iterator();
            while (i.hasNext()) {
                JSONObject object = (JSONObject) i.next();
                Object name = object.get("name");
                if (name != null) {
                    Category newCategory = new Category(name.toString(), parent);
                    values.add(newCategory);
                    values.addAll(getCategories(object, newCategory));
                }
            }
        }
        return values;
    }

    private static List<Division> getDivisions() {
        JSONParser parser = new JSONParser();
        try {
            Integer count = 0;
            JSONObject jsonObject = (JSONObject) parser.parse(IOToolkit.getResourceAsText("/model/divisions.json"));
            return getDivisions(jsonObject, count, null);
        } catch (ParseException pe) {
            System.out.println(pe);
        }
        return new ArrayList<Division>();
    }

    private static List<Division> getDivisions(JSONObject o, int count, Division parent) throws ParseException {
        List<Division> values = new ArrayList<Division>();
        JSONArray jsonArray = (JSONArray) o.get("divisions");
        if (jsonArray != null) {
            Iterator i = jsonArray.iterator();
            while (i.hasNext()) {
                JSONObject object = (JSONObject) i.next();
                Object id = object.get("id");
                Object name = object.get("name");
                if (name != null) {
                    Division newDivision = new Division(id.toString(), name.toString(), parent);
                    values.add(newDivision);
                    values.addAll(getDivisions(object, count, newDivision));
                }
            }
        }
        return values;
    }
}
